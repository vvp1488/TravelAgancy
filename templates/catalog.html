{% extends 'base.html' %}
{% load static %}
{% block styles %}
.main-baner {
       height: 250px;
    }

@media (max-width: 767px){
.main-baner {
       height: 100px;
    }}

{% endblock styles %}
{% block content %}
<div class="container">
      <div class="row mt-5" style="margin-bottom:200px;">

          <div class="col-10 shadow-lg  offset-1 offset-md-0 col-md-3 border pt-3 rounded-4 me-5" style="max-height:600px; font-family: 'Titillium Web', sans-serif; ">
              <p class="text-center text-bg-primary bg-info shadow-lg rounded fs-4">Підбір туру <i class="bi bi-bus-front"></i></p>
              <form method="GET">
            <div class="row "><hr>
            <div class="col col-md-3  mt-2">Ціна</div>
            <div class="col mt-2"><input class="form-control " placeholder="від" type="text" id="price_min" name="price_min" /></div>
                <div class="col mt-2"><input class="form-control " placeholder="до" type="text" id="price_max" name="price_max" /></div>
            </div>

            <div class="mt-3 mb-3" id="slider-range"></div><hr>

<div class="d-grid gap-2 mb-3 shadow-lg">
  <button class="btn border  border-5 text-black dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
    Місце відправки
  </button>

  <ul class="dropdown-menu">
        {% for place in start_places %}
        <li>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="start_place" id="id_start_place_{{ forloop.counter }}" value="{{ place.id }}">
                <label class="form-check-label" for="id_start_place_{{ forloop.counter }}">{{ place }}</label>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>


<div class="d-grid gap-2 mb-3 shadow-lg">
  <button class="btn border  border-5 text-black dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
    Екскурсійні об'єкти
  </button>

  <ul class="dropdown-menu">
        {% for obj in tour_objects %}
        <li>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="tour_objects" id="obj{{ forloop.counter }}" value="{{ obj.id }}">
                <label class="form-check-label" for="obj{{ forloop.counter }}">{{ obj }}</label>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>

                  <div class="d-grid gap-2 mb-3 shadow-lg">
  <button class="btn border  border-5 text-black dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
    У вартість туру входить
  </button>

  <ul class="dropdown-menu">
        {% for pi in price_include %}
        <li>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="price_include" id="pi{{ forloop.counter }}" value="{{ pi.id }}">
                <label class="form-check-label" for="pi{{ forloop.counter }}">{{ pi }}</label>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
                      <div class="d-grid gap-2 mb-3 shadow-lg">
  <button class="btn border  border-5 text-black dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
    У вартість туру не входить
  </button>

  <ul class="dropdown-menu">
        {% for pe in price_exclude %}
        <li>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="price_exclude" id="pe{{ forloop.counter }}" value="{{ pe.id }}">
                <label class="form-check-label" for="pe{{ forloop.counter }}">{{ pe }}</label>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
    <div class="d-grid gap-2 shadow-lg">
  <button type="submit" class="btn bg-warning fs-5 text-white">Пошук</button>
    </div>

</form>
<img style="max-width: 100%;" src="{% static 'images/logo7.png' %}" alt="" ></a>
      </div>

          <div class="col">
              <h5 class="mt-3">Знайдено турів: <span class="border border-3 badge bg-info">{{filter.qs.count }}</span></h5><hr>


            <div class="row mt-2">

            {% for tour in page_obj %}


            <div class="col col-md-6 offset-1 offset-md-0 mt-2 mb-5">
              <div class="card shadow-lg w-100 h-100 " style="width: 18rem;">
                  {% if tour.main_photo.url is not None %}
                  <a href="{{ tour.get_absolute_url }}"><img src="{{ tour.main_photo.url }}" style="max-height: 240px;" class="card-img-top" alt="..."></a>
                  {% endif %}

  <div class="card-body ">
    <h5 class="card-title">{{ tour.name }}</h5>
    <p class="card-text overflow-scroll" style="max-height: 100px; min-height:110px;">{{tour.description}}</p>
      <hr>
      <p class="card-text lh-base fw-light"><b>Ціна: {{tour.price}} грн*</b><br>
      *на святкові дати ціну уточнюйте
      </p>

<div class="row">
    <div class="col-md-5">
        <a href="{{ tour.get_absolute_url }}" class="btn btn-lg bg-info  text-white">Детальніше</a>
    </div>
    <div class="col">
         <a href="#" class="btn btn-lg bg-success  text-white" >Замовити тур<i class="bi bi-telephone-inbound ms-2"></i></a>
    </div>
</div>


  </div>
</div>
          </div>
          {% endfor %}
              </div>

         <nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center">

    </li>
      {% if page_obj.has_previous %}
    <li class="page-item text-dark"><a class="page-link text-dark" href="?page={{ page_obj.previous_page_number }}">&laquo;  {{page_obj.previous_page_number}}</a></li>
      {% else %}
<li class="page-item disabled">
      <a class="page-link">1</a>
    </li>

      {% endif %}

    <li class="page-item disabled"><a class="page-link">Сторінка {{ page_obj.number }} із {{ page_obj.paginator.num_pages }}</a></li>
      {% if page_obj.has_next %}
      <li class="page-item text-dark"><a class="page-link text-dark" href="?page={{ page_obj.next_page_number }}">{{page_obj.next_page_number}}  &raquo;</a></li>
      {% endif %}
  </ul>
</nav>



          </div>

      </div>
</div>

{% endblock content %}

{% block scripts %}

      $( function() {
        $( "#slider-range" ).slider({
          range: true,
          min: 0,
          max: 5000,
          values: [ 500, 2600 ],
          slide: function( event, ui ) {
            $( "#price_min" ).val(ui.values[ 0 ]) + $( "#price_max" ).val(ui.values[ 1 ]);
          }
        });

  });
{% endblock scripts %}